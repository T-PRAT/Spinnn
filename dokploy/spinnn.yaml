application:
  name: spinnn
  project: spinnn  # Votre nom de projet GitHub

services:
  # Frontend Vue + Vite
  - name: spinnn-frontend
    type: vite
    repo: https://github.com/tprat/Spinnn  # Remplacez par votre repo
    branch: main
    buildCommand: bun install && bun run build
    startCommand: bun run preview
    port: 5173
    envVars:
      VITE_API_URL: https://spinnn-api.ton-domaine.com  # Remplacez par votre domaine
    domains:
      - spinnn.ton-domaine.com  # Votre domaine principal

  # Backend Hono + Bun
  - name: spinnn-api
    type: bun
    repo: https://github.com/tprat/Spinnn
    branch: main
    buildCommand: cd server && bun install
    startCommand: cd server && bun run start
    port: 3001
    workingDir: /server
    envVars:
      STRAVA_CLIENT_ID:
      STRAVA_CLIENT_SECRET:
      FRONTEND_URL: https://spinnn.ton-domaine.com
      NODE_ENV: production
    domains:
      - spinnn-api.ton-domaine.com
